\section{Design og implementering}

Syntetiseringen bygger på et valg af grundfrekvens \(f_0\) for den tone der skal afspilles.
Ud fra den almindelig tonerække for en stemt guitar\cite{GuitarTunings}, kan der nemt vælges et sæt frekvenser til test, disse er gengivet i \tabref{guitar tunings}.
Sammenhængen mellem grundfrekvens og samplingfrekvens ses i \ref{eq:fund and sample relation} og giver tonens periodetid \(N\) i samples og kan desuden beskrives som en forsinkelse i det filter der realiserer algoritmen.

\begin{equation}\label{eq:fund and sample relation}
  N = \frac{f_s}{f_0}
\end{equation}

På \figref{Karplus-strong-schematic} ses blokdiagram der beskriver filteret hvor \(L = N\). I den originale algoritme bruges et 2-tap midlingsfilter da algoritmen blev udviklet til at kræve minimal beregningskraft\cite{Karplus1983}, dog kan andre filtre også bruges.

\fig{Karplus-strong-schematic}{0.4}{
  Signalflow der viser konceptet af Karplus Strong syntese.\cite{KarplusSignalFlowWiki}}

Jaffe \& Smith beskriver algoritmen
\begin{equation}
  y[n] = x[n] + \frac{y[n - N] + y\left[n -(N + 1)\right]}{2}
\end{equation}
hvor \(x\) er signalamplituden ved sample \(n\) og \(y\) er udgangsamplitude ved sample \(n\).
\(N\) er længden af toneperioden givet i samples \cite{Jaffe1983}

\begin{table}[]
  \centering
  \caption{Guitar streng og sammenhørende frekvens ved almindelig stemning\cite{GuitarTunings}.}
  \label{tab:guitar tunings}
  \begin{tabular}{cc}
    \toprule
    Streng & Frekvens  \\ \midrule
    E      & 329.63 Hz \\
    B      & 246.94 Hz \\
    G      & 196.00 Hz \\
    D      & 146.83 Hz \\
    A      & 110.00 Hz \\
    E      & 82.41 Hz  \\ \bottomrule
  \end{tabular}
\end{table}

\subsection{Implementation af Karplus-Strong algoritmen}

Den fulde implementation ses i bilag \ref{seq:appendix:matlab code}.
